<p id="spreads">Loading...</p>
<h1>---Bets for tonight---</h1>
<p>Arizona +6.5<br>CMU -8.5<br>M(OH) -1.5<br>Cavs +1.5<br>Hornets -1.5<br>76ers -1.5</p>

<div id="scoreboard"></div>

<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f9;
    text-align: center;
  }

  #scoreboard {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin: 20px;
  }

  .game {
    background-color: #2d2d2d;
    color: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }

  .game .teams {
    display: flex;
    justify-content: space-between;
    font-size: 1.2em;
  }

  .game .score {
    font-size: 2em;
    font-weight: bold;
  }

  .game .info {
    margin-top: 10px;
    font-size: 1em;
    color: #ccc;
  }

  .game .status {
    font-size: 1.5em;
    color: #e74c3c;
  }
</style>

<script>
  async function loadData() {
    const scoreboard = document.getElementById('scoreboard');
    scoreboard.innerHTML = "Loading..."; // Set initial loading message

    try {
      // Fetch data from the APIs
      const cfbres = await fetch('https://site.api.espn.com/apis/site/v2/sports/football/college-football/scoreboard?dates=20251119');
      const cfbdata = await cfbres.json();

      const mbbres = await fetch('https://site.api.espn.com/apis/site/v2/sports/basketball/mens-college-basketball/scoreboard?dates=20251119');
      const mbbdata = await mbbres.json();

      const nbares = await fetch('https://site.api.espn.com/apis/site/v2/sports/basketball/nba/scoreboard?dates=20251119');
      const nbadata = await nbares.json();

      // Safely collect available events
      const games = [
        nbadata.events?.[0],
        nbadata.events?.[1],
        nbadata.events?.[2],
        cfbdata.events?.[0],
        cfbdata.events?.[1],
        mbbdata.events?.[1],
      ].filter(Boolean); // Remove undefined entries

      // Clear previous content
      scoreboard.innerHTML = '';

      games.forEach(game => {
        const gameElement = document.createElement('div');
        gameElement.classList.add('game');

        const teams = game.competitions[0].competitors.map(team => team.team.shortDisplayName);
        const scores = game.competitions[0].competitors.map(team => team.score);

        const status = game.status;
        const quarter = game.competitions[0].status.type.description;  // e.g., "Halftime", "4th Quarter"
        const timeLeft = game.competitions[0].status.periodTime;  // Time remaining, if available

        gameElement.innerHTML = `
          <div class="teams">
            <span>${teams[0]}</span>
            <span>${teams[1]}</span>
          </div>
          <div class="score">
            ${scores[0]} - ${scores[1]}
          </div>
          <div class="info">
            <div>Quarter: ${quarter}</div>
            <div>Time Left: ${timeLeft || "N/A"}</div>
          </div>
          <div class="status">${status}</div>
        `;

        scoreboard.appendChild(gameElement);
      });
    } catch (err) {
      console.error(err);
      scoreboard.innerHTML = "Error loading games.";
    }
  }

  loadData();
</script>
