<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content ="width=device-width, initial-scale=1">
      <!--<link rel="stylesheet" href="mystyle.css">-->
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <title>College Pickem Week 12</title>
  </head>
  <body>
    <h1>Week 12 Make Your Picks</h1>
     
    <form id="gamesForm" >
      <p>Select who is making the picks:</p>
      <input type="radio" id="Andrew" name="pickers" value="Andrew">
      <label for="Andrew">Andrew</label>
       <input type="radio" id="Samuel" name="pickers" value="Samuel">
      <label for="Samuel">Samuel</label>
       <input type="radio" id="Travis" name="pickers" value="Travis">
      <label for="Travis">Travis</label>
       <input type="radio" id="Blayne" name="pickers" value="Blayne">
      <label for="Blayne">Blayne</label>
      <br>
     <h4>Game slate for Week 12</h4><br>
      <div id="gameslate"></div>

   
<br>
<button type="button" onclick="getFormData()">Submit</button>
    </form>
    <script>
      function Get(yourUrl){
            var Httpreq = new XMLHttpRequest();
            Httpreq.open("GET",yourUrl,false);
            Httpreq.send(null);
            return Httpreq.responseText;
        }
      let espnUrl = "https://site.api.espn.com/apis/site/v2/sports/football/college-football/scoreboard?dates=20241113-20241116";
      
      var scoreboard = JSON.parse(Get(espnUrl));
      console.log(scoreboard);
     const para = document.createElement("p");
     for(let i = 0; i < scoreboard['events'].length; i++){
      let homeTeam = scoreboard['events'][i]['competitions'][0]['competitors'][0]['team']['location'];
      let awayTeam = scoreboard['events'][i]['competitions'][0]['competitors'][1]['team']['location'];

      var select = document.createElement("select");
      var gameName = document.createElement("p");

      const awayImg = document.createElement("img");
      awayImg.src = scoreboard['events'][i]['competitions'][0]['competitors'][1]['team']['logo'];
      awayImg.height = 50;
      awayImg.width = 50;
      gameName.appendChild(awayImg);
      gameName.append(awayTeam + " @ ");

      const homeImg = document.createElement("img");
      homeImg.src = scoreboard['events'][i]['competitions'][0]['competitors'][0]['team']['logo'];
      homeImg.height = 50;
      homeImg.width = 50;
      gameName.appendChild(homeImg)
      gameName.append(homeTeam);



      var option1 = document.createElement("option");
      option1.value = "undecided";
      option1.text = "undecided";
      select.appendChild(option1);

      var option2 = document.createElement("option");
      option2.value = homeTeam;
      option2.text = homeTeam;
      select.appendChild(option2);


      var option3 = document.createElement("option");
      option3.value = awayTeam;
      option3.text = awayTeam;
      select.appendChild(option3);

      var container = document.getElementById("gameslate");
      var linebreak1 = document.createElement("br");
      var linebreak2 = document.createElement("br");
      container.append(gameName);
      container.appendChild(select);
      container.append(linebreak1);
      container.append(linebreak2);

      
     }
    function getFormData() {
     const gamesForm = document.getElementById("gamesForm");
     const picks = []
     const user = gamesForm.elements["pickers"].value;
     for(let i = 0; i < scoreboard['events'].length; i++){
      picks.push(gamesForm.querySelectorAll("select")[i].value);
     }
     localStorage.setItem('picks', JSON.stringify(picks));
     localStorage.setItem('picker', user);
     console.log("it worked");
     console.log(picks[0]);
     location.href = "PostPicks.html";
    }


    </script>
  </body>
</html>
