<div id="auth-section">
    <input type="email" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button onclick="signUp()">Sign Up</button>
    <button onclick="signIn()">Login</button>
</div>

<div id="leaderboard">
    <h2>üèÜ Leaderboard</h2>
    <div id="leaderboard-list"></div>
</div>

<script>
    // --- AUTH LOGIC ---
    async function signUp() {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const { data, error } = await supabaseClient.auth.signUp({ email, password });
        if (error) alert(error.message);
        else alert("Check your email for confirmation!");
    }

    async function signIn() {
        const { data, error } = await supabaseClient.auth.signInWithPassword({
            email: document.getElementById('email').value,
            password: document.getElementById('password').value
        });
        if (error) alert(error.message);
        else location.reload(); // Refresh to show games
    }

    // --- PICK LOGIC ---
    async function makePick(gameId, teamName) {
        const user = (await supabaseClient.auth.getUser()).data.user;
        if (!user) return alert("Login first!");

        const { error } = await supabaseClient.from('user_picks').upsert({
            user_id: user.id,
            espn_id: gameId,
            picked_team: teamName
        });

        if (error) alert("Pick failed: " + error.message);
        else alert("Pick saved!");
    }
</script>
